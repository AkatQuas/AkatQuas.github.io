<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-sicp/building-abstractions-with-data">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Building Abstractions with Data | AkatQuas&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://akatquas.github.io/docs/sicp/building-abstractions-with-data"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Building Abstractions with Data | AkatQuas&#x27;s blog"><meta data-rh="true" name="description" content="Programs are typically designed to model complex phenomena, and more often than not one must construct computational objects that have several parts in order to model real-world phenomena that have several aspects. Any programming language would provide the means for building abstractions by combining data objects to form compound data."><meta data-rh="true" property="og:description" content="Programs are typically designed to model complex phenomena, and more often than not one must construct computational objects that have several parts in order to model real-world phenomena that have several aspects. Any programming language would provide the means for building abstractions by combining data objects to form compound data."><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://akatquas.github.io/docs/sicp/building-abstractions-with-data"><link data-rh="true" rel="alternate" href="https://akatquas.github.io/docs/sicp/building-abstractions-with-data" hreflang="en"><link data-rh="true" rel="alternate" href="https://akatquas.github.io/docs/sicp/building-abstractions-with-data" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AkatQuas&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AkatQuas&#39;s blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d30c7ca7.css">
<link rel="preload" href="/assets/js/runtime~main.5d758bff.js" as="script">
<link rel="preload" href="/assets/js/main.6f4b5c91.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="AkatQuas" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo.svg" alt="AkatQuas" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AkatQuas 🔭</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/about">Topic</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://akatquas.github.io/dateless/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dateless<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/AkatQuas/AkatQuas.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/about">Akat</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/network-top-down-approach/">Computer Network</a><button aria-label="Toggle the collapsible sidebar category &#x27;Computer Network&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/data-structure/">Data Structure</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Structure&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/compiler/">Compiler</a><button aria-label="Toggle the collapsible sidebar category &#x27;Compiler&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/interpreter-in-js/">Writing a interpreter in JavaScript</a><button aria-label="Toggle the collapsible sidebar category &#x27;Writing a interpreter in JavaScript&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/lisp-interpreter-in-c/index">Build Your Own Lisp Interpreter in C</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/lisp-interpreter-in-py/chapter-00">Build A Lisp Interpreter in Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/sicp/index">SICP</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sicp/index">Structure and Interpretation of Computer Programs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sicp/building-abstractions-with-procedures">Building Abstractions with Procedures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sicp/building-abstractions-with-data">Building Abstractions with Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sicp/modularity-objects-state">Modularity, Objects, and State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sicp/metalinguistic-abstraction">Metalinguistic Abstraction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sicp/computing-with-register-machines">Computing with Register Machines</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/concurrency-in-go/">Concurrency in Go</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concurrency in Go&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/docker/">Docker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Docker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/kubernetes/">Kubernetes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Kubernetes&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SICP</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Building Abstractions with Data</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Building Abstractions with Data</h1></header><p>Programs are typically designed to model complex phenomena, and more often than not one must construct computational objects that have several parts in order to model real-world phenomena that have several aspects. Any programming language would provide the means for building abstractions by combining data objects to form compound data.</p><p>We need compound data in programming languages for:</p><ul><li><p>to elevate the conceptual level at which we can design our programs,</p></li><li><p>to increase the modularity of our designs,</p></li><li><p>to enhance the expressive power of our language.</p></li></ul><p>Just as the ability to define procedures enables us to deal with processes at a higher conceptual level than that of the primitive operations of the language, the ability to construct compound data objects enables us to deal with data at a higher conceptual level than that of the primitive data objects of the language.</p><p>The use of compound data also enables us to increase the modularity of our programs. The general technique of isolating the parts of a program that deal with how data objects are represented from the parts of a program that deal with how data objects are used is a powerful design methodology called <em>data abstraction</em>.</p><p>As with compound procedures, the main issue to be addressed is that of abstraction as a technique for coping with complexity, and we will see how data abstraction enables us to erect suitable abstraction barriers between different parts of a program.</p><p>The key to forming compound data is that a programming language should provide some kind of “glue” so that data objects can be combined to form more complex data objects.</p><p>One key idea in dealing with compound data is the notion of <em>closure</em> —that the glue we use for combining data objects should allow us to combine not only primitive data objects, but compound data objects as well. Another key idea is that compound data objects can serve as <em>conventional interfaces</em> for combining program modules in mix-and-match ways.</p><p>Using <em>symbolic expressions</em> and various alternatives for representing sets of objects. There are many ways in which a given data structure can be represented in terms of simpler objects, and the choice of representation can have significant impact on the time and space requirements of processes that manipulate the data.</p><p>Maintaining modularity in the presence of <em>generic operations</em>, which helps to handle different types of data, requires more powerful abstraction barriers than can be erected with simple data abstraction alone.</p><p>In particular, we introduce data-directed programming as a technique that allows individual data representations to be designed in isolation and then combined additively.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-data-abstraction">Introduction to Data Abstraction<a class="hash-link" href="#introduction-to-data-abstraction" title="Direct link to heading">​</a></h2><p>Data abstraction is a methodology that enables us to isolate how a compound data object is used from the details of how it is constructed from more primitive data objects.</p><p>The basic idea of data abstraction is that the programs should use data in such a way as to make no assumptions about the data that are not strictly necessary for performing the task at hand. At the same time, a <em>concrete</em> data representation is defined independent of the programs that use the data.</p><p>The interface between these two parts of our system will be a set of procedures, called <em>selectors</em> and <em>constructors</em>, that implement the abstract data in terms of the concrete representation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pairs">Pairs<a class="hash-link" href="#pairs" title="Direct link to heading">​</a></h4><p>To enable the program to implement the concrete level of the data abstraction, the language provides a compound structure called a <em>pair</em>.</p><p>A pair is a data object that can be given a name and manipulated, just like a primitive data object.</p><p>The ability to combine pairs means that pairs can be used as general-purpose building blocks to create all sorts of complex data structures. Data objects constructed from pairs are called <em>list-structured</em> data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="abstraction-barriers">Abstraction Barriers<a class="hash-link" href="#abstraction-barriers" title="Direct link to heading">​</a></h3><p>In general, the underlying idea of data abstraction is to identify for each type of data objects of that type will be expressed, and then to use only those operations in manipulating the data.</p><p>The details of how one level is implemented are irrelevant to the rest levels. In effect, procedures at each level are the interfaces that define the abstraction barriers and connect the different levels.</p><p>Using abstraction barriers makes programs much easier to maintain and to modify. Any complex data structure can be represented in a variety of ways with the primitive data structures provided by a programming language. Of course, the choice of representation influences the programs that operate on it; thus, if the representation were to be changed at some later time, all such programs might have to be modified accordingly.</p><p>Constraining the dependence on the representation to a few interface procedures helps us design programs as well as modify them, because it allows us to maintain the flexibility to consider alternate implementations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-meant-by-data">What Is Meant by Data?<a class="hash-link" href="#what-is-meant-by-data" title="Direct link to heading">​</a></h3><p>What exactly is meant by data? It is not enough to say <em>whatever is implemented by the given selectors and constructors</em>. In general, we can think of data as defined by some collection of selectors and constructors, together with specified conditions that these procedures must fulfill in order to be a valid representation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hierarchical-data-and-the-closure-property">Hierarchical Data and the Closure Property<a class="hash-link" href="#hierarchical-data-and-the-closure-property" title="Direct link to heading">​</a></h2><p>Pairs provide a primitive <em>glue</em> to construct compound data objects.</p><p>The ability to create pairs whose elements could be pairs is the essence of list structure&#x27;s importance as a representational tool. In general, an operation for combining data objects satisfies the closure property if the results of combining things with that operation can themselves be combined using the same operation. Closure is the key to power in any means of combination because it permits programmers to create <em>hierarchical</em> structures-structures made up of parts, which themselves are made up of parts, and so on.</p><blockquote><p>Throughout the book, the meaning of <em>closure</em> is from abstract algebra, and its meaning is where a set of elements is said to be closed under an operation if applying the operation to elements in the set produces an element that is again an element of that set. <em>代数闭包（域）</em> or <em>algebraic closure</em>.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="representing-sequences">Representing Sequences<a class="hash-link" href="#representing-sequences" title="Direct link to heading">​</a></h3><p>One of the useful structures we can build with pairs is a sequence—an ordered collection of data objects.</p><blockquote><p>List, Array</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="list-operation">List operation<a class="hash-link" href="#list-operation" title="Direct link to heading">​</a></h4><p>It is customary to number the elements of the list beginning with index 0.</p><p>The <code>length</code> procedure implements a simple recursive plan. The reduction step is:</p><ul><li>The <code>length</code> of an empty list is <code>0</code>,</li><li>The <code>length</code> of any list is <code>1</code> plus the <code>length</code> of the after list.</li></ul><p><code>append</code> takes two lists as arguments and combines their elements to make a new list, using a recursive plan:</p><ul><li>If <code>list1</code> is the empty list, then the result is just <code>list2</code>.</li><li>Otherwise, append the first element of <code>list1</code> and <code>list2</code>, and add the rest <code>list1</code> onto the result</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapping-over-lists">Mapping over lists<a class="hash-link" href="#mapping-over-lists" title="Direct link to heading">​</a></h4><p>One extremely useful operation is to apply some transformation to each element in a list and generate the list of results. We can abstract this general idea and capture it as a common paern expressed as a higher-order procedure.</p><p>The higher-order procedure here is called <code>map</code>. <code>map</code> takes as arguments a procedure of one argument and a list, and returns a list of the results produced by applying the procedure to each element in the list.</p><p><code>map</code> is an important construct, not only because it captures a common pattern, but because it establishes a higher level of abstraction barrier that isolates the implementation of procedures that transform lists from the details of how the elements of the list are extracted and combined. This abstraction gives us the flexibility to change the low-level details of how sequences are implemented, while preserving the conceptual framework of operations that transform sequences to sequences.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hierarchical-structures">Hierarchical Structures<a class="hash-link" href="#hierarchical-structures" title="Direct link to heading">​</a></h3><p>Another way to think of sequences whose elements are sequences is as <em>trees</em>. The elements of the sequence are the branches of the tree, and elements that are themselves sequences are subtrees.</p><p>Recursion is a natural tool for dealing with tree structures, since we can often reduce operations on trees to operations on their branches, which reduce in turn to operations on the branches of the branches, and so on, until we reach the leaves of the tree.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapping-over-trees">Mapping over trees<a class="hash-link" href="#mapping-over-trees" title="Direct link to heading">​</a></h4><p>Just as <code>map</code> is a powerful abstraction for dealing with sequences, <code>map</code> together with recursion is a powerful abstraction for dealing with trees.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequences-as-conventional-interfaces">Sequences as Conventional Interfaces<a class="hash-link" href="#sequences-as-conventional-interfaces" title="Direct link to heading">​</a></h3><p>If we could organize our programs to make the signal-flow structure manifest in the procedures we write, this would increase the conceptual clarity of the resulting code.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sequence-operations">Sequence Operations<a class="hash-link" href="#sequence-operations" title="Direct link to heading">​</a></h4><p>The key to organizing programs so as to more clearly reflect the signal-flow structure is to concentrate on the <em>signals</em> that flow from one stage in the process to the next. If we represent these signals as lists, then we can use list operations to implement the processing at each of the stages.</p><p>The value of expressing programs as sequence operations is that this helps us make program designs that are modular, that is, designs that are constructed by combining relatively independent pieces. We can encourage modular design by providing a library of standard components together with a conventional interface for connecting the components in flexible ways.</p><p>Sequences, implemented here as lists, serve as a conventional interface that permits us to combine processing modules. Additionally, when we uniformly represent structures as sequences, we have localized the data-structure dependencies in our programs to some sequence operations. By changing these, we can experiment with alternative representations of sequences, while leaving the overall design of our programs intact.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nested-mappings">Nested Mappings<a class="hash-link" href="#nested-mappings" title="Direct link to heading">​</a></h4><p>We can extend the sequence paradigm to include many computations that are commonly expressed using nested loops.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="symbolic-data">Symbolic Data<a class="hash-link" href="#symbolic-data" title="Direct link to heading">​</a></h2><p>We extend the representational capability of our language by introducing the ability to work with arbitrary symbols as data.</p><blockquote><p>MatLab has the ability to do symbolic mathematical work.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quotation">Quotation<a class="hash-link" href="#quotation" title="Direct link to heading">​</a></h3><p>In order to manipulate symbols we need a new element in the language: the ability to <em>quote</em> a data object.</p><p>The expression <code>(list a b)</code> constructs a list of the values of a and b rather than the symbols themselves. This issue is well-known in the context of natural languages, where words and sentences may be regarded either as semantic entities or as character strings (syntactic entities).</p><p>Using quotation, such as <code>(list &#x27;a &#x27;b)</code> allows us to type in compound objects, using the conventional printed representation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">(define a 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(define b 2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(list a b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// output is (1 2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(list &#x27;a &#x27;b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// output is (a b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">(list &#x27;a b)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// output is (a 2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="representing-sets">Representing Sets<a class="hash-link" href="#representing-sets" title="Direct link to heading">​</a></h3><p>There are a number of possible representation for sets. Informally, a set is simply a collection of distinct objects.</p><ol><li><p>Sets as unordered lists</p><p>One way to represent a set is as a list of its elements in which no element appears more than once. The empty set is represented by the empty list.</p></li><li><p>Sets as ordered lists</p><p>One way to speed up our set operations is to change the representation so that the set elements are listed in increasing order. To do this, we need some way to compare two objects so that we can say which is bigger.</p></li><li><p>Sets as binary trees</p><p>To do better than the ordered-list representation, we arrange the set elements in the form of a tree. Each node of the tree holds one element of the set, called the <em>entry</em> at that node, and a link to each of two other (possibly empty) nodes. The <em>left</em> link points to elements smaller than the one at the node, and the <em>right</em> link to elements greater than the one at the node.</p><p>One way to solve this unbalanced tree problem is to define an operation that transforms an arbitrary tree into a balanced tree with the same elements. Then we can perform this transformation after every few <em>adjoin-set</em> operations to keep our set in balance. There are other ways to solve this problem, most of which involve designing new data structures for which searching and insertion both can be done in <code>Θ(logn)</code> steps.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-huffman-encoding-trees">Example: Huffman Encoding Trees<a class="hash-link" href="#example-huffman-encoding-trees" title="Direct link to heading">​</a></h3><p>In general, we can attain significant savings if we use variable-length prefix codes that take advantage of the relative frequencies of the symbols in the messages to be encoded.</p><p>A Huffman code can be represented as a binary tree whose leaves are the symbols that are encoded. At each non-leaf node of the tree there is a set containing all the symbols in the leaves that lie below the node. In addition, each symbol at a leaf is assigned a weight (which is its relative frequency), and each non-leaf node contains a weight that is the sum of all the weights of the leaves lying below it. The weights are not used in the encoding or the decoding process.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-representations-for-abstract-data">Multiple Representations for Abstract Data<a class="hash-link" href="#multiple-representations-for-abstract-data" title="Direct link to heading">​</a></h2><p>In addition to the data-abstraction barriers that isolate different design choices from each other and permit different choices to coexist in a single program.</p><p>Data may be represented in different ways by different parts of a program. This requires constructing <em>generic procedures</em> - procedures that can operate on data that may be represented in more than one way. Our main technique for building generic procedures will be to work in terms of data objects that have <em>type tags</em>, that is, data objects that include explicit <em>information about how they are to be processed</em>.</p><p><em>Data-directed</em> programming is a powerful and convenient implementation strategy for additively assembling systems with generic operations.</p><p>The discipline of data abstraction ensures that the different implementation of same selectors will work with different constructor representations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tagged-data">Tagged data<a class="hash-link" href="#tagged-data" title="Direct link to heading">​</a></h3><p>One way to view data abstraction is as an application of the <em>principle of least commitment</em>.</p><p>The abstraction barrier formed by the selectors and constructors permits programmers to defer to the last possible moment the choice of a concrete representation for the data objects and thus retain maximum flexibility in the system design.</p><p>A straightforward way to accomplish this distinction between different constructor is to include a <em>type tag</em>. Then we can use the tag to decide which selector to apply.</p><p>Each generic selector is implemented as a procedure that checks the tag of its argument and calls the appropriate procedure for handling data of that type.</p><p>Since each data object is tagged with its type, the selectors operate on the data in a generic manner. That is, each selector is defined to have a behavior that depends upon the particular type of data it is applied to.</p><blockquote><p>Factory Pattern</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-directed-programming-and-additivity">Data-Directed Programming and Additivity<a class="hash-link" href="#data-directed-programming-and-additivity" title="Direct link to heading">​</a></h3><p>The general strategy of checking the type of a datum and calling an appropriate procedure is called <em>dispatching on type</em>.</p><p>This is a powerful strategy for obtaining modularity in system design. On the other hand, implementing the dispatch has two significant weaknesses:</p><ol><li>the generic interface procedures must know about all the different representations.</li><li>no two procedures in the entire system have the same name even though the individual representations can be designed separately.</li></ol><p>To understand how data-directed programming works, begin with the observation that whenever we deal with a set of generic operations that are common to a set of different types, we are, in effect, dealing with a two-dimensional table that contains the possible operations on one axis and the possible types on the other axis. The entries in the table are the procedures that implement each operation for each type of argument presented.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="message-passing">Message passing<a class="hash-link" href="#message-passing" title="Direct link to heading">​</a></h4><p>The key idea of data-directed programming is to handle generic operations in programs by dealing explicitly with operation-and-type tables.</p><p>The style of programming organizes the required dispatching on type by having each operation take care of its own dispatching. In effect, this decomposes the operation-and-type table into rows, with each generic operation procedure representing a row of the table.</p><p>An alternative implementation strategy is to decompose the table into columns and, instead of using <em>intelligent operations</em> that dispatch on data types, to work with <em>intelligent data objects</em> that dispatch on operation names. We can do this by arranging things so that a data object is represented as a procedure that takes as input the required operation name and performs the operation indicated.</p><p>This style of programming is called <em>message passing</em>. The name comes from the image that a data object is an entity that receives the requested operation name as a <em>message</em>. Message passing is not a mathematical trick but a useful technique for organizing systems with generic operations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="systems-with-generic-operations">Systems with Generic Operations<a class="hash-link" href="#systems-with-generic-operations" title="Direct link to heading">​</a></h2><p>Generic interface procedures helps programmers to link the code that specifies the data operations to the several representations. The same idea is not only suitable to define operations that are generic over different representations but also to define operations that are generic over different kinds of arguments.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generic-arithmetic-operations">Generic Arithmetic Operations<a class="hash-link" href="#generic-arithmetic-operations" title="Direct link to heading">​</a></h3><p>Creating a table to store types and operations.</p><blockquote><p>Operator overloading</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="combining-data-of-different-types">Combining Data of Different Types<a class="hash-link" href="#combining-data-of-different-types" title="Direct link to heading">​</a></h3><p>We have gone to great pains to introduce barriers between parts of our programs so that they can be developed and understood separately. We would like to introduce the cross-type operations in some carefully controlled way, so that we can support them without seriously violating our module boundaries.</p><p>One way to handle cross-type operations is to design a different procedure for each possible combination of types for which the operation is valid.</p><p>This technique works, but it is cumbersome. With such a system, the cost of introducing a new type is not just the construction of the package of procedures for that type but also the construction and installation of the procedures that implement the cross-type operations.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coercion">Coercion<a class="hash-link" href="#coercion" title="Direct link to heading">​</a></h4><p>In the general situation of completely unrelated operations acting on completely unrelated types, implementing explicit cross-type operations, cumbersome though it may be, is the best that one can hope for.</p><p>Often the different data types are not completely independent, and there may be ways by which objects of one type may be viewed as being of another type. This process is called <em>coercion</em>.</p><blockquote><p>type casting</p></blockquote><p>In general, we can implement this idea by designing coercion procedures that transform an object of one type into an equivalent object of another type.</p><p>Although we still need to write coercion procedures to relate the types (possibly n<sup>2</sup> procedures for a system with <code>n</code> types), we need to write only one procedure for each pair of types rather than a different procedure for each collection of types and each generic operation. What we are counting on here is the fact that the appropriate transformation between types depends only on the types themselves, not on the operation to be applied.</p><p>On the other hand, there may be applications for which our coercion scheme is not general enough. Even when neither of the objects to be combined can be converted to the type of the other it may still be possible to perform the operation by converting both objects to a third type.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hierarchies-of-types">Hierarchies of types<a class="hash-link" href="#hierarchies-of-types" title="Direct link to heading">​</a></h4><p>Often there is more <em>global</em> structure in how the different types relate to each other, this is a so-called <em>hierarchy of types</em>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="inadequacies-of-hierarchies">Inadequacies of hierarchies<a class="hash-link" href="#inadequacies-of-hierarchies" title="Direct link to heading">​</a></h4><p>In general, a type may have more than one subtype, or more than one supertype.</p><p>This multiple-supertypes issue is particularly thorny, since it means that there is no unique way to <em>raise</em> a type in the hierarchy. Finding the <em>correct</em> supertype in which to apply an operation to an object may involve considerable searching through the entire type network on the part of a procedure such as <em>apply-generic</em>. Since there generally are multiple subtypes for a type, there is a similar problem in coercing a value <em>down</em> the type hierarchy.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/sicp">sicp</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/sicp/building-abstractions-with-procedures"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Building Abstractions with Procedures</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/sicp/modularity-objects-state"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Modularity, Objects, and State</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction-to-data-abstraction" class="table-of-contents__link toc-highlight">Introduction to Data Abstraction</a><ul><li><a href="#abstraction-barriers" class="table-of-contents__link toc-highlight">Abstraction Barriers</a></li><li><a href="#what-is-meant-by-data" class="table-of-contents__link toc-highlight">What Is Meant by Data?</a></li></ul></li><li><a href="#hierarchical-data-and-the-closure-property" class="table-of-contents__link toc-highlight">Hierarchical Data and the Closure Property</a><ul><li><a href="#representing-sequences" class="table-of-contents__link toc-highlight">Representing Sequences</a></li><li><a href="#hierarchical-structures" class="table-of-contents__link toc-highlight">Hierarchical Structures</a></li><li><a href="#sequences-as-conventional-interfaces" class="table-of-contents__link toc-highlight">Sequences as Conventional Interfaces</a></li></ul></li><li><a href="#symbolic-data" class="table-of-contents__link toc-highlight">Symbolic Data</a><ul><li><a href="#quotation" class="table-of-contents__link toc-highlight">Quotation</a></li><li><a href="#representing-sets" class="table-of-contents__link toc-highlight">Representing Sets</a></li><li><a href="#example-huffman-encoding-trees" class="table-of-contents__link toc-highlight">Example: Huffman Encoding Trees</a></li></ul></li><li><a href="#multiple-representations-for-abstract-data" class="table-of-contents__link toc-highlight">Multiple Representations for Abstract Data</a><ul><li><a href="#tagged-data" class="table-of-contents__link toc-highlight">Tagged data</a></li><li><a href="#data-directed-programming-and-additivity" class="table-of-contents__link toc-highlight">Data-Directed Programming and Additivity</a></li></ul></li><li><a href="#systems-with-generic-operations" class="table-of-contents__link toc-highlight">Systems with Generic Operations</a><ul><li><a href="#generic-arithmetic-operations" class="table-of-contents__link toc-highlight">Generic Arithmetic Operations</a></li><li><a href="#combining-data-of-different-types" class="table-of-contents__link toc-highlight">Combining Data of Different Types</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas/kiddo-plays" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kiddo plays<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/AkatQuas/nprogresse" target="_blank" rel="noopener noreferrer" class="footer__link-item">NProgressE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas" target="_blank" rel="noopener noreferrer" class="footer__link-item">Who would it be?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 AkatQuas. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d758bff.js"></script>
<script src="/assets/js/main.6f4b5c91.js"></script>
</body>
</html>