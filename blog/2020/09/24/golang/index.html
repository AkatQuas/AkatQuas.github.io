<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Learn some Golang | AkatQuas&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://akatquas.github.io/blog/2020/09/24/golang"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Learn some Golang | AkatQuas&#x27;s blog"><meta data-rh="true" name="description" content="I start from this online tutorial, which is a good and comprehensive tutorial."><meta data-rh="true" property="og:description" content="I start from this online tutorial, which is a good and comprehensive tutorial."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-09-24T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="golang"><link data-rh="true" rel="icon" href="/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://akatquas.github.io/blog/2020/09/24/golang"><link data-rh="true" rel="alternate" href="https://akatquas.github.io/blog/2020/09/24/golang" hreflang="en"><link data-rh="true" rel="alternate" href="https://akatquas.github.io/blog/2020/09/24/golang" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="AkatQuas&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="AkatQuas&#39;s blog Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d30c7ca7.css">
<link rel="preload" href="/assets/js/runtime~main.5d758bff.js" as="script">
<link rel="preload" href="/assets/js/main.6f4b5c91.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="AkatQuas" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo.svg" alt="AkatQuas" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">AkatQuas 🔭</b></a><a class="navbar__item navbar__link" href="/docs/about">Topic</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://akatquas.github.io/dateless/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dateless<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/AkatQuas/AkatQuas.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/23/excerpt-on-unit-test">单元测试的实践</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/11/design-a-cli-tool">设计一个 CLI 工具</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/30/architecture-design-imo">架构设计的一些哲学经验</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/09/electron-application-architecture">Electron 应用的理想架构设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/04/type-vs-interface">Type vs Interface</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Learn some Golang</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-09-24T00:00:00.000Z" itemprop="datePublished">September 24, 2020</time> · <!-- -->22 min read</div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>I start from <a href="https://www.digitalocean.com/community/tutorial_series/how-to-code-in-go" target="_blank" rel="noopener noreferrer">this online tutorial</a>, which is a good and comprehensive tutorial.</p><p>Most content is excerpt from <a href="https://www.packtpub.com/product/mastering-go-second-edition/9781838559335" target="_blank" rel="noopener noreferrer">Mastering Go</a>. You&#x27;d better buy one if you like the book.</p><p>You&#x27;d really check it out, <a href="/docs/concurrency-in-go/index">Concurrency In Depth</a>.</p><p><a href="https://github.com/AkatQuas/kiddo-plays/tree/master/golanger" target="_blank" rel="noopener noreferrer">Project on GitHub</a>.</p><h1>Useful tips</h1><p>go version go1.14.4 darwin/amd64</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">go doc --help</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go doc fmt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go doc fmt.Printf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go tool compile </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">source.go</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go tool compile -pack </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">source.go</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># allow to detect race conditions, concurrency</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go tool compile -race </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">source.go</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go tool compile hello.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go tool compile -pack hello.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># go tool compile -race hello.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># The -W parameter tells the go tool compile command to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># print the `debug parse tree` after the type checking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">go tool compile -W </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">source.go</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="some-example-files">some example files<a class="hash-link" href="#some-example-files" title="Direct link to heading">​</a></h3><p>Detailed on Garbage Collector in GO : <a target="_blank" href="/assets/files/garbageCollector-d2f9122a3b5919c53d591960ebf2c52b.go">garbageCollector.go</a>.</p><p>Glance at the package <code>unsafe</code>: <a target="_blank" href="/assets/files/unsafe-3634ac4d40fb1fe3f5430875ba9d97c6.go">unsafe.go</a>.</p><p>Glance at the keyword <code>defer</code>: <a target="_blank" href="/assets/files/simple-defer-b7232cf53097e1e94073ffd476050c9c.go">simple-defer.go</a>, <a target="_blank" href="/assets/files/flow-control-57cf03c4e5988334a4db776b503e0931.go">flow-control</a>.</p><p>Glance at the built-in functions <code>panic</code> and <code>recover</code>: <a target="_blank" href="/assets/files/panicRecover-98a22e5404fe853fe494e58510900aff.go">panicRecover</a>, <a target="_blank" href="/assets/files/flow-control-57cf03c4e5988334a4db776b503e0931.go">flow-control</a>, <a target="_blank" href="/assets/files/error-handling-c89010eee682068f59bcc3e9f16f69f7.go">error-handling</a>.</p><p>Glance at the package <code>time</code>: <a target="_blank" href="/assets/files/dateAndTime-2fe7952c00666bb4b6454393ed241029.go">dateAndTime.go</a>.</p><p>Glance at the package <code>strings</code>: <a target="_blank" href="/assets/files/useStrings-01a1de9a4b880ed64e3a40ed16b5a5e3.go">useStrings.go</a>.</p><p>Find out more information about the functions of the <code>runtime</code> package by visiting <a href="https://golang.org/pkg/runtime/" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/runtime/</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-syntax-and-grammar-in-go">Basic Syntax and Grammar in GO<a class="hash-link" href="#basic-syntax-and-grammar-in-go" title="Direct link to heading">​</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// using for loop to simulate while lopp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">condition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// using for loop to simulate do...while loop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> ok </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> ok </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> anExpression </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">differentS1AndS2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  s1 </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  s2 </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> s1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  s1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// at this time, s1 and s2 both point to the same internal array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%v %[1]T\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">s2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%v\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">s1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  s1 </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">append</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">s1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// at this time, s1 is different from s2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%v %[1]T\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">s2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;%v\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">s1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Go has its own way of supporting <code>tuples</code>, which mainly allows functions to return <em>multiple values</em> without needing to <em>group</em> them in structures as is the case in C.</p><p><code>new</code> returns the memory address of the allocated object. Put simply, <code>new</code> returns a pointer!</p><p>The main difference between <code>new</code> and <code>make</code> is that variables created with <code>make</code> are properly initialized without just zeroing the allocated memory space. Additionally, <code>make</code> can only be applied to maps, channels, and slices, and it does not return a memory address, which means that <code>make</code> does not return a <em>pointer</em>.</p><p>A Go <code>string</code> is a read-only <code>byte</code> <code>slice</code> that can hold any type of bytes, and it can have an arbitrary length.</p><p>A <code>rune</code> is an <code>int32</code> value, and therefore it is a Go type that is used for representing a Unicode code point. A Unicode code point or code position is a numerical value that is usually used for representing single Unicode characters; however, it can also have alternative meanings, such as providing formatting information.</p><p>A Go <em>package</em> is a Go source file that begins with the <code>package</code> keyword followed by the name of the package.</p><p>A Go <em>type method</em> is a function with a special <em>receiver</em> argument. We declare methods as ordinary functions with an additional parameter that appears in front of the function name. This particular parameter <strong>connects</strong> the function to the type of that extra parameter. As a result, that parameter is called the <em>receiver</em> of the method.</p><p>A type assertion is the <code>x.(T)</code> notation where <code>x</code> is of interface type and <code>T</code> is a type. Additionally, the actual value stored in <code>x</code> is of type <code>T</code>, and <code>T</code> must satisfy the interface type of <code>x</code>!</p><p>Type assertions help you do two things. The first thing is to check whether an interface value keeps a particular type. When used this way, a type assertion returns two values: the underlying value, and a bool value. Although the underlying value is what you might want to use, the Boolean value tells you whether the type assertion was successful or not! The second thing a type assertion does is to allow you to use the concrete value stored in an interface or assign it to a new variable. This means that if there is an int variable in an interface, you can get that value using type assertion.</p><p>Glance at the usage of <code>interfaces</code>: <a target="_blank" href="/assets/files/interfacesAssertion-961d0bbf5cfa14a5558d44ee1ebd4aaa.go">interfacesAssertion.go</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reflection">Reflection<a class="hash-link" href="#reflection" title="Direct link to heading">​</a></h2><p><strong>Reflection</strong> is an advanced Go feature that allows you to dynamically learn the type of an arbitrary object as well as information about its structure. Go offers the <code>reflect</code> package for working with reflection.</p><p>Reflection is necessary for the implementation of packages such as <code>fmt</code>, <code>text/template</code>, and <code>html/template</code>. In the <code>fmt</code> package, reflection saves you from having to deal explicitly with every data type that exists.</p><p>Consequently, you might need to use reflection when you want to be as <em>generic</em> as possible, or when you want to make sure you will be able to deal with data types that do not exist at the time you are writing your code. Additionally, reflection is handy when working with values of types that do not implement a common interface.</p><p>The stars of the <code>reflect</code> package are two types named reflect.Value and reflect.Type. The former type is used for storing values of any type, whereas the latter type is used for representing Go types.</p><p>Reflection should be used sparingly for three main reasons.</p><ol><li>The first reason is that extensive use of reflection will make your programs hard to read and maintain. A potential solution to this problem is the good documentation; however, developers are famous for not having the time to write the required documentation.</li><li>The second reason is that the Go code which uses reflection will make your programs slower. Generally speaking, Go code that is made to work with a particular data type will always be faster than Go code that uses reflection to work dynamically with any Go data type. Additionally, such dynamic code will make it difficult for tools to refactor or analyze your code.</li><li>The last reason is that reflection errors cannot be caught at build time and are reported at runtime as a panic. This means that reflection errors can potentially crash your programs!</li></ol><p>Glance at the package <code>reflection</code>: <a target="_blank" href="/assets/files/reflection-76ca84c49e7c8f6b1dad15f3edff47ab.go">reflection.go</a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-concurrency">Go Concurrency<a class="hash-link" href="#go-concurrency" title="Direct link to heading">​</a></h2><p>Go offers its own unique and innovative way of achieving concurrency, which comes in the form of <strong>goroutines</strong> and <strong>channels</strong>.</p><p>Goroutines are the smallest Go entities that can be executed on their own in a Go program, which implies that goroutines are not autonomous entities like Unix processes—goroutines live in threads that live in Unix processes.</p><p>Whilst channels can get data from goroutines in a concurrent and efficient way and thus allow goroutines to have a point of reference and communicate with each other.</p><p>Everything in Go is executed using goroutines; this makes perfect sense since Go is a concurrent programming language by design. Therefore, when a Go program starts its execution, its single goroutine calls the <code>main()</code> function, which starts the actual program execution.</p><blockquote><p>You should never make any assumptions about the order in which your goroutines will be executed.</p></blockquote><p>The Unix kernel scheduler is responsible for the execution of the threads of a program.</p><p>On the other hand, the Go runtime has its own scheduler, which is responsible for the execution of the goroutines using a technique known as <em>m:n scheduling</em>, where <em>m</em> goroutines are executed using <em>n</em> operating system threads using multiplexing. The Go scheduler is the Go component responsible for <em>the way, and the order</em> in which the goroutines of a Go program get executed. This makes the Go scheduler a really important part of the Go programming language, as everything in a Go program is executed as a goroutine.</p><p>It is a very common misconception that <em>concurrency</em> is the same thing as <em>parallelism</em>—this is just not true! <em>Parallelism</em> is the <em>simultaneous execution of multiple entities of some kind</em>, whereas <em>concurrency</em> is a way of structuring your components so that they <em>can be executed independently when possible</em>.</p><p>It is only when you build software components concurrently that you can safely execute them in parallel, when and if your operating system, and your hardware permit it. In a valid concurrent design, adding concurrent entities makes the whole system run faster because more things can run in parallel. So, the desired parallelism comes from a better concurrent expression and implementation of the problem. So, the developer should not think about parallelism, but about breaking things into independent components that solve the initial problem when combined.</p><p>You can define a new goroutine using the <code>go</code> keyword followed by <em>a function name</em> or the full definition of <em>an anonymous function</em>. The <code>go</code> keyword <strong>makes the function call to return immediately, while the function starts running in the background as a goroutine, and the rest of the program continues its execution</strong>.</p><p>However, you cannot control or make any assumptions about the order in which your goroutines are going to be executed because this depends on the <em>scheduler of the operating system</em>, <em>the Go scheduler</em>, and <em>the load of the operating system</em>.</p><p>Glance at the package <code>sync</code> in goroutine: <a target="_blank" href="/assets/files/goroutinesSync-708e9d20c19d72f6f2f39d987cf7b30a.go">goroutinesSync.go</a>.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Although both functions implement the same functionality,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// their definitions are slightly different.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// The difference is created by the `&lt;-` symbol found on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// the right of the `chan` keyword in the definition of the `f2()` function.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This denotes that the `c` channel can be used for writing only.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token keyword" style="font-style:italic">chan</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> x </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `c` is send-only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c </span><span class="token keyword" style="font-style:italic">chan</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> x </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `out` is send-only, `in` is receive-only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">out </span><span class="token keyword" style="font-style:italic">chan</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> in </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token keyword" style="font-style:italic">chan</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain">out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// invalid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  out </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  in </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> x </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// invalid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `out`, `in` are bidirectional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">func</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">out </span><span class="token keyword" style="font-style:italic">chan</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> in </span><span class="token keyword" style="font-style:italic">chan</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">int64</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> x</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scheduler-in-go">scheduler in go<a class="hash-link" href="#scheduler-in-go" title="Direct link to heading">​</a></h3><p>Go works using the <em>m:n scheduler</em> (or <em>M:N scheduler</em>) that schedules goroutines using OS threads.</p><p>Go uses the <em>fork-join concurrency model</em>. The fork part of the model states that a child branch can be created at any point of a program. Analogously, the join part of the Go concurrency model is where the child branch will end and join with its parent. Among other things, both <code>sync.Wait()</code> statements and channels that collect the results of goroutines are join points, whereas any new goroutine creates a child branch.</p><p>The <em>fair scheduling strategy</em> shares evenly all the load between the available processors.</p><p>A goroutine in Go is a <em>task</em>, whereas everything after the calling statement of a goroutine is a <em>continuation</em>. In the <em>work stealing strategy</em> used by Go scheduler, a (logical) processor that is underutilized looks for additional work from other processors. When it finds such jobs, it steals them from the other processor(s), hence the name, <em>work stealing strategy</em>. Additionally, the work-stealing algorithm of Go queues and steals continuations. A <em>stalling join</em> is a point where a thread of execution stalls at a join and starts looking for other work to do. Although both task stealing and continuation stealing have stalling joins, continuations happen more often than tasks; therefore, the Go algorithm works with continuations rather than tasks.</p><p>The main disadvantage of continuation stealing is that it requires extra work from the compiler of the programming language. Fortunately, Go provides that extra help and therefore uses <em>continuation stealing</em> in its work-stealing algorithm. One of the benefits of continuation stealing is that you get the same results when using just functions or a single thread with multiple goroutines. This makes perfect sense as only one thing is executed at any given time in both cases.</p><p>Now, let&#x27;s return back to the <em>m:n scheduling algorithm</em> used in Go.</p><p>The Go scheduler works using three main kinds of entities: OS threads (M) that are related to the operating system in use, goroutines (G), and logical processors (P). The number of processors that can be used by a Go program is specified by the <code>GOMAXPROCS</code> environment variable—at any given time there are most <code>GOMAXPROCS</code> processors.</p><p>The following figure illustrates this point:</p><img loading="lazy" src="/images/golang/go-scheduler.png" alt="go scheduler" class="img_ev3q"><p>There are two different kinds of queues: a global queue and a local queue attached to each logical processor.</p><p>Goroutines from the global queue are assigned to the queue of a logical processor in order to be executed. As a result, the Go scheduler needs to check the global queue in order to avoid executing goroutines that are only located at the local queue of each logical processor. However, the global queue is not checked all the time, which means that it does not have an advantage over the local queues.</p><p>Additionally, each logical processor can have multiple threads, and <em>the stealing occurs between the local queues of the available logical processors</em>. Finally, keep in mind that the Go scheduler is allowed to create more OS threads when needed. OS threads are pretty expensive, however, which means that dealing with OS threads too much might slow down your Go applications.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="select">select<a class="hash-link" href="#select" title="Direct link to heading">​</a></h3><p>In practice, this means that <code>select</code> allows a goroutine to <em>wait</em> on multiple communications operations. Therefore, the main benefit is that <code>select</code> gives you the power to work with multiple channels using a single <code>select</code> block. As a consequence, you can have nonblocking operations on channels.</p><blockquote><p>The biggest problem when using multiple channels and the <code>select</code> keyword is <strong>deadlocks</strong>, which needs extra care during the design and the development process.</p></blockquote><p>You should checkout the file <a target="_blank" href="/assets/files/selectSimple-4afe2cbb04415452d867771b0d7fb96a.go">selectSimple.go</a>.</p><p>The biggest advantage of <code>select</code> is that it can connect and manage multiple channels. As channels connect goroutines, <code>select</code> connects channels that connect goroutines. Therefore, the <code>select</code> statement is one of the most important part of the Go concurrency model.</p><p>You should checkout the file <a target="_blank" href="/assets/files/selectTimeout-fa3af3f1445a17683f9ed4e20dcf31fd.go">selectTimeout.go</a>, which use <code>timeout</code> and <code>select</code> to stop or return from goroutine earlier.</p><p>If you send a message to a closed channel, the program will <em>panic</em>. However, if you try to read from a closed channel, you will get the <em>zero value</em> of the <em>type</em> of that channel. So, after closing a channel, you can no longer write to it, but you can still read from it. Finally, if you try to close a nil channel, your program will panic.</p><p>In order to be able to close a channel, the channel must not be receive-only. Additionally, a <code>nil</code> channel always blocks, which means that trying to read or write from a <code>nil</code> channel will block. This property of channels can be very useful when you want to disable a branch of a select statement by assigning the <code>nil</code> value to a channel variable.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffered-channels">buffered channels<a class="hash-link" href="#buffered-channels" title="Direct link to heading">​</a></h2><p>Buffered channels are channels that allow the Go scheduler to put jobs in the queue quickly in order to be able to deal with more requests.</p><p>The technique presented here works as follows: All incoming requests are forwarded to a channel, which processes them one by one. When the channel is done processing a request, it sends a message to the original caller saying that it is ready to process a new one. So, the capacity of the buffer of the channel restricts the number of simultaneous requests that it can keep.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil-channel">nil channel<a class="hash-link" href="#nil-channel" title="Direct link to heading">​</a></h2><p>The nil channels are a special kind of channel because they will always block.</p><p>You can read the usages of <em>buffered channels</em> and <em>nil channel</em> in this list <a target="_blank" href="/assets/files/channelUsages-4e123ed0c2cf7b5f2b5bbd46dce5757d.go">channelUsages</a>.</p><p>An <a target="_blank" href="/assets/files/channelInOrder-5dc2654e0a454e3e5f010a171da56396.go">example</a> to use channel to ordering some goroutine execution.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shared-memory-and-shared-variables">Shared Memory and Shared Variables<a class="hash-link" href="#shared-memory-and-shared-variables" title="Direct link to heading">​</a></h2><p>Shared memory and shared variables are the most common ways for Unix threads to communicate with each other.</p><p>A <strong>Mutex</strong> variable, which is an abbreviation for <em>mutual exclusion</em> variable, is mainly used for thread synchronization and for protecting shared data when multiple writes can occur at the same time. A mutex works like a buffered channel of capacity one, which allows at most one goroutine to access a shared variable at any given time. This means that there is no way for two or more goroutines to try to update that variable simultaneously.</p><p>A <strong>critical section</strong> of a concurrent program is the code that cannot be executed simultaneously by all processes, threads, or, in this case, by all goroutines. It is the code that needs to be protected by mutexes. Therefore, identifying the critical sections of your code will make the whole programming process so much simpler that you should pay attention to this task.</p><blockquote><p>A critical section cannot be embedded in another critical section when both critical sections use the same sync.Mutex or sync.RWMutex variable. Put simply avoid, at almost any cost, spreading mutexes across functions because that makes it really hard to see whether you are embedding or not!</p></blockquote><p>A simple <a target="_blank" href="/assets/files/mutexSimple-b59bcbf3f5cffdc6d3cb8dab37d174f1.go">example</a>, with a lot of comments, to illustrate the <code>sync.Mutex</code> usage.</p><p>However, the programme would fall into deadlock if you forget to unlock <code>sync.Mutex</code>, as the <a target="_blank" href="/assets/files/mutexDeadlocked-b2204daf0d8c396cfd32f5df8b66b0e7.go">list</a> shows.</p><p>The <code>sync.RWMutex</code> type is another kind of mutex, to be honest, it is an improved version of <code>sync.Mutex</code>. In other words, <code>sync.RWMutex</code> is based on <code>sync.Mutex</code> with the necessary additions and improvements.</p><p>Although only <em>one writer</em> is allowed to perform write operations using a <code>sync.RWMutex</code> mutex, you can have <em>multiple readers</em> owning a <code>sync.RWMutex</code> mutex. However, there is one thing of which you should be aware: until <em>all the readers</em> of a <code>sync.RWMutex</code> mutex unlock that mutex, you cannot lock it for writing.</p><p>The functions that can help you work with a <code>sync.RWMutex</code> mutex are <strong><code>RLock()</code></strong> and <strong><code>RUnlock()</code></strong>, which are used for locking and unlocking the mutex, respectively, for <em>reading purposes</em>.</p><p>The <code>Lock()</code> and <code>Unlock()</code> functions used in a <code>sync.Mutex</code> mutex should still be used when you want to lock and unlock a <code>sync.RWMutex</code> mutex for <em>writing purposes</em>.</p><p>A simple <a target="_blank" href="/assets/files/rwMutexSimple-b7470840edc28c4147f661f7576d15f0.go">example</a>, with a lot of comments, to illustrate the <code>sync.RWMutex</code> usage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sharing-memory-using-goroutines">Sharing memory using goroutines<a class="hash-link" href="#sharing-memory-using-goroutines" title="Direct link to heading">​</a></h2><p>Although shared memory is the traditional way that threads use to communicate with each other, Go comes with built-in synchronization features that allow a single goroutine to own a shared piece of data. This means that other goroutines must send messages to this single goroutine that owns the shared data, which prevents the corruption of the data.</p><p>Such a goroutine is called a <strong>monitor goroutine</strong>. In Go terminology, this is <em>sharing memory by communicating</em> instead of <em>communicating by sharing memory</em>.</p><blockquote><p>Simply <em>sharing memory</em> brings us the problems such as race condition, read-write competition. While using <em>communicating</em>, using <code>channel</code> for example, we are sharing the data / message between goroutines.</p></blockquote><blockquote><p>That said, Go does provide traditional locking mechanisms in the sync package. Most locking issues can be solved using either channels or traditional locks.</p><p>So which should you use? Use whichever is most expressive and/or most simple.</p></blockquote><p>A simple <a target="_blank" href="/assets/files/goroutinesSharedMemory-ec3ea0c27734e649f557eb158c2916b4.go">example</a>, with a lot of comments, to illustrate how we can implement shared memory among goroutines using goroutine and channels.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="catching-race-conditions">Catching race conditions<a class="hash-link" href="#catching-race-conditions" title="Direct link to heading">​</a></h2><p>Using the <code>-race</code> flag when running or building a Go source file will turn on the Go <strong>race detector</strong>, which will make the compiler create a modified version of a typical executable file. This modified version can record all accesses to shared variables as well as all synchronization events that take place, including calls to <code>sync.Mutex</code> and <code>sync.WaitGroup</code>. After analyzing the relevant events, the race detector prints a report that can help you identify potential problems so that you can correct them.</p><p>A simple <a target="_blank" href="/assets/files/raceCatch-6dcff5a8b0478205dd087b14f07e2106.go">example</a>, with a lot of comments, to illustrate how we can detect the race condition. Using <code>sync.Mutex</code>, we can get rid of the race condition since we locked it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-context-package">The context package<a class="hash-link" href="#the-context-package" title="Direct link to heading">​</a></h2><p>The main purpose of the <code>context</code> package is to define the <code>Context</code> type and support <em>cancellation</em>! Yes, you heard that right; the main purpose of the context package is supporting cancellation because there are times that, for some reason, you want to abandon what you are doing. Also, it would be very helpful to be able to include some extra information about your cancelling decisions.</p><p>The <code>Context</code> type is an interface with four methods, named <code>Deadline()</code>, <code>Done()</code>, <code>Err()</code>, and <code>Value()</code>. The good news is that you do not need to implement all of these functions of the <code>Context</code> interface—you just need to modify a <code>Context</code> variable using functions such as <code>context.WithCancel()</code> and <code>context.WithTimeout()</code>.</p><p>A simple <a target="_blank" href="/assets/files/contextSimple-02c1cce91913ebf19579df55d9b6caf4.go">example</a>, with a lot of comments, to illustrate how we can create a context with <code>context.Background()</code>, how the <code>cancel()</code> function is called to <em>cancel</em> the context.</p><p>An advanced <a target="_blank" href="/assets/files/contextWithHttp-5678eaa8b6b2891d0cfe9822193dc639.go">example</a>, with a lot of comments, to illustrate how we can create a context with <code>context.Background()</code>, how the <code>cancel()</code> function is called to <em>cancel</em> the <code>http.Request</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="worker-pool">Worker pool<a class="hash-link" href="#worker-pool" title="Direct link to heading">​</a></h2><p>Generally speaking, a <em>Worker pool</em> is a set of threads that are about to process jobs assigned to them. We replace the threads with goroutines to implement the worker pool. However, threads do not usually die after serving a request because the cost of ending a thread and creating a new one is too high, whereas goroutines do <em>die</em> after finishing their job.</p><p>As you will see in the <a target="_blank" href="/assets/files/workerPool-cd8ea427d300dd8a401a352f89e7c481.go">example</a>, worker pools are implemented with the help of buffered channels, because they allow you to limit the number of goroutines running at the same time.</p><p>The <a target="_blank" href="/assets/files/workerPool-cd8ea427d300dd8a401a352f89e7c481.go">example</a> will implement a simple task: it will process integer numbers and print their square values using a single goroutine for serving each request.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-testing-optimization-profiling">Code Testing, Optimization, Profiling<a class="hash-link" href="#code-testing-optimization-profiling" title="Direct link to heading">​</a></h2><p><strong>Code optimization</strong> is the process where you try to discover the parts of your code that have a big influence on the performance of the entire program in order to make them <em>run faster</em> or <em>use fewer resources</em>.</p><blockquote><p>The general advice for optimization is that you must <em>optimize bug-free code only</em>.</p></blockquote><p><strong>Profiling</strong> is a process of dynamic program analysis that measures various values related to program execution in order to give you a better understanding on the behavior of your program.</p><blockquote><p>The single most important thing to remember is that if you want to profile Go code, you will need to import the <code>runtime/pprof</code> standard Go package, either directly or indirectly. You can find the help page of the pprof tool by executing the <code>go tool pprof -help</code> command.</p></blockquote><p>Go supports two kinds of profiling: <strong>CPU profiling</strong> and <strong>memory profiling</strong>.</p><p>Two examples: <a target="_blank" href="/assets/files/profileMe-3669093bb548ac44265b4ccb92cdee19.go">using native package to profile</a>, <a target="_blank" href="/assets/files/profileMeBetter-4785219f0321a9cb864ed3614d9ae71f.go">using third-party package to profile</a>.</p><p>Go allows you to write tests for your Go code in order to detect bugs. Strictly speaking, this section is about <strong>automated testing</strong>, which involves writing extra code to verify whether the real code; that is, the production code, works as expected or not. Thus, the result of a test function is either <em>PASS</em> or <em>FAIL</em>.</p><blockquote><p>Always put the testing code in a different source file. There is no need to create a huge source file that is hard to read and maintain.</p></blockquote><p>An <a target="_blank" href="/assets/files/testMe-a8e3cdd25c37084af9865521d6355cc3.go">example</a> with its <a target="_blank" href="/assets/files/testMe_test-a752f156497f0d3b0eac59ef54198aca.go">test file</a> show how to do some test in Go.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-programming">Network Programming<a class="hash-link" href="#network-programming" title="Direct link to heading">​</a></h2><p>Some useful snippets on network programming in go could be found <a href="https://github.com/AkatQuas/kiddo-plays/tree/master/golanger/mastering-go-archive/network" target="_blank" rel="noopener noreferrer">here</a>.</p><p>You cannot create a TCP or UDP client or server in Go without using the functionality offered by the <code>net</code> package.</p><p>The <code>net.Dial()</code> function is used for connecting to a network as a client, whereas the <code>net.Listen()</code> function is used for telling a Go program to accept network connections and thus act as a server. The first parameter of both functions is the network type, but this is where their similarities end. The return value of both the <code>net.Dial()</code> and <code>net.Listen()</code> functions is of the <code>net.Conn</code> type, which implements the <code>io.Reader</code> and <code>io.Writer</code> interfaces.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tcp-client">TCP client<a class="hash-link" href="#tcp-client" title="Direct link to heading">​</a></h3><p>TCP stands for Transmission Control Protocol, and its principal characteristic is that it is a reliable protocol.</p><p>The TCP header of each packet includes <em>source port</em> and <em>destination port</em> fields. These two fields, plus the source and destination IP addresses, are combined to identify uniquely a single TCP connection.</p><p>Examples: <a target="_blank" href="/assets/files/TCPclient-231f2f97b2b51de299f689ae117ef6ce.go">TCP client 1</a>, <a target="_blank" href="/assets/files/TCPclient_other-9d3d5c8d2c868a55768d1727fb90ea2b.go">TCP client 2</a>, <a target="_blank" href="/assets/files/TCPserver-1878d58c6a064756e67f56e020a9c667.go">TCP server 1</a>, <a target="_blank" href="/assets/files/TCPserver_other-5deff9c4149b312245570dc1e8fdbc95.go">TCP server 2</a>, <a target="_blank" href="/assets/files/TCPserver_goroutine-7d18e0e217f0ed2d15c853e609131c68.go">TCP server with goroutines</a>, <a target="_blank" href="/assets/files/TCPserver_go_example-35dfe4208adc0909b188ce8d67d7bdf0.go">TCP server 2 with goroutines</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="udp-client">UDP client<a class="hash-link" href="#udp-client" title="Direct link to heading">​</a></h3><p>The biggest difference between UDP and TCP is that UDP is not reliable by design. This also means that in general, UDP is simpler than TCP because UDP does not need to keep the state of a UDP connection.</p><p>Examples: <a target="_blank" href="/assets/files/UDPclient-fa0d5b6319789155d873140dee2e5101.go">UDP client</a>, <a target="_blank" href="/assets/files/UDPserver-8a345264f5cc716963ed53449bae9cf2.go">UDP server</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-procedure-call-rpc">Remote Procedure Call (RPC)<a class="hash-link" href="#remote-procedure-call-rpc" title="Direct link to heading">​</a></h3><p>Remote Procedure Call (RPC) is a client-server mechanism for Interprocess communication that uses TCP/IP.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples-for-closures-and-anonymous-goroutines">Examples for Closures and Anonymous Goroutines<a class="hash-link" href="#examples-for-closures-and-anonymous-goroutines" title="Direct link to heading">​</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">salutation </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">go</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  salutation </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;welcome&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Wait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">salutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// salutation is modified to &quot;welcome&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Compile warning: loop variable salutation captured by func literal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// output: the order is non-deterministic, but the salutation is &quot;good day&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 2 good day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 0 good day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 1 good day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> salutation </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;greetings&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;good day&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">go</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">index </span><span class="token builtin" style="color:rgb(130, 170, 255)">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> salutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Wait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, the goroutine is running a closure that has closed over the iteration variable <code>salutation</code>, which has a type of <code>string</code>. As our loop iterates, <code>salutation</code> is being assigned to the next string value in the slice literal. Because the goroutines being scheduled may run at any point in time in the future, it is undetermined what values will be printed from within the goroutine. This means the <code>salutation</code> variable falls out of scope. This is an interesting side note about how Go manages memory. The Go runtime is observant enough to know that a reference to the salutation variable is still being held, and therefore will transfer the memory to the heap so that the goroutines can continue to access it.</p><p>Usually, the <em>loop</em> exits before any <em>goroutines</em> begin running, so salutation is transferred to the heap holding a reference to the last value in the slice, <code>&quot;good day&quot;</code>.</p><p>The proper way to write this loop is to pass a copy of <code>salutation</code> into the closure so that by the time the goroutine is run, it will be operating on the data from its iteration of the loop.</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// output: order is non-deterministic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// hello</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// good day</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// greetings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> salutation </span><span class="token operator" style="color:rgb(137, 221, 255)">:=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">range</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;hello&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;greetings&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;good day&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">go</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">salutation </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// declare a parameter, which shadow the original salutation variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fmt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Println</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">salutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">salutation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// pass in the current iteration’s variable to the closure</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">Wait</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/golang">golang</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2020/12/06/wander-in-webpack"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Wander in webpack</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2020/04/01/fullstack-starter"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Fullstack Starter Project Boilerplate</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#some-example-files" class="table-of-contents__link toc-highlight">some example files</a></li><li><a href="#basic-syntax-and-grammar-in-go" class="table-of-contents__link toc-highlight">Basic Syntax and Grammar in GO</a></li><li><a href="#reflection" class="table-of-contents__link toc-highlight">Reflection</a></li><li><a href="#go-concurrency" class="table-of-contents__link toc-highlight">Go Concurrency</a><ul><li><a href="#scheduler-in-go" class="table-of-contents__link toc-highlight">scheduler in go</a></li><li><a href="#select" class="table-of-contents__link toc-highlight">select</a></li></ul></li><li><a href="#buffered-channels" class="table-of-contents__link toc-highlight">buffered channels</a></li><li><a href="#nil-channel" class="table-of-contents__link toc-highlight">nil channel</a></li><li><a href="#shared-memory-and-shared-variables" class="table-of-contents__link toc-highlight">Shared Memory and Shared Variables</a></li><li><a href="#sharing-memory-using-goroutines" class="table-of-contents__link toc-highlight">Sharing memory using goroutines</a></li><li><a href="#catching-race-conditions" class="table-of-contents__link toc-highlight">Catching race conditions</a></li><li><a href="#the-context-package" class="table-of-contents__link toc-highlight">The context package</a></li><li><a href="#worker-pool" class="table-of-contents__link toc-highlight">Worker pool</a></li><li><a href="#code-testing-optimization-profiling" class="table-of-contents__link toc-highlight">Code Testing, Optimization, Profiling</a></li><li><a href="#network-programming" class="table-of-contents__link toc-highlight">Network Programming</a><ul><li><a href="#tcp-client" class="table-of-contents__link toc-highlight">TCP client</a></li><li><a href="#udp-client" class="table-of-contents__link toc-highlight">UDP client</a></li><li><a href="#remote-procedure-call-rpc" class="table-of-contents__link toc-highlight">Remote Procedure Call (RPC)</a></li></ul></li><li><a href="#examples-for-closures-and-anonymous-goroutines" class="table-of-contents__link toc-highlight">Examples for Closures and Anonymous Goroutines</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas/kiddo-plays" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kiddo plays<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/AkatQuas/nprogresse" target="_blank" rel="noopener noreferrer" class="footer__link-item">NProgressE<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/AkatQuas" target="_blank" rel="noopener noreferrer" class="footer__link-item">Who would it be?<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 AkatQuas. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d758bff.js"></script>
<script src="/assets/js/main.6f4b5c91.js"></script>
</body>
</html>